!function(o,t){"object"==typeof exports&&"undefined"!=typeof module?t(require("FroalaEditor")):"function"==typeof define&&define.amd?define(["FroalaEditor"],t):t(o.FroalaEditor)}(this,function(m){"use strict";m=m&&m.hasOwnProperty("default")?m["default"]:m,Object.assign(m.POPUP_TEMPLATES,{"colors.picker":"[_BUTTONS_][_TEXT_COLORS_][_BACKGROUND_COLORS_][_CUSTOM_COLOR_]"}),Object.assign(m.DEFAULTS,{colorsText:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsBackground:["#61BD6D","#1ABC9C","#54ACD2","#2C82C9","#9365B8","#475577","#CCCCCC","#41A85F","#00A885","#3D8EB9","#2969B0","#553982","#28324E","#000000","#F7DA64","#FBA026","#EB6B56","#E25041","#A38F84","#EFEFEF","#FFFFFF","#FAC51C","#F37934","#D14841","#B8312F","#7C706B","#D1D5D8","REMOVE"],colorsStep:7,colorsHEXInput:!0,colorsDefaultTab:"text",colorsButtons:["colorsBack","|","-"]});var c=["text","background"];m.PLUGINS.colors=function(g){var C=g.$;function t(){g.popups.hide("colors.picker")}function s(o){for(var t="text"===o?g.opts.colorsText:g.opts.colorsBackground,r='<div class="fr-color-set fr-'+o+"-color"+(g.opts.colorsDefaultTab===o||"text"!==g.opts.colorsDefaultTab&&"background"!==g.opts.colorsDefaultTab&&"text"===o?" fr-selected-set":"")+'">',e=0;e<t.length;e++)0!==e&&e%g.opts.colorsStep==0&&(r+="<br>"),"REMOVE"!==t[e]?r+='<span class="fr-command fr-select-color" style="background: '+t[e]+';" tabIndex="-1" aria-selected="false" role="button" data-cmd="'+o+'Color" data-param1="'+t[e]+'"><span class="fr-sr-only">'+g.language.translate("Color")+" "+t[e]+"&nbsp;&nbsp;&nbsp;</span></span>":r+='<span class="fr-command fr-select-color" data-cmd="'+o+'Color" tabIndex="-1" role="button" data-param1="REMOVE" title="'+g.language.translate("Clear Formatting")+'">'+g.icon.create("remove")+'<span class="fr-sr-only">'+g.language.translate("Clear Formatting")+"</span></span>";return r+"</div>"}function l(o){var t=g.popups.get("colors.picker"),r=t.find(".fr-"+o+"-color .fr-active-item").attr("data-param1"),e=t.find(".fr-color-hex-layer input"),a=t.find('.fr-colors-tab[data-param1="'+o+'"]');e.length&&a.hasClass("fr-selected-tab")&&C(e.val(r).input).trigger("change")}function e(o){"REMOVE"!==o?g.format.applyStyle("background-color",g.helpers.HEXtoRGB(o)):g.format.removeStyle("background-color"),t()}function a(o){"REMOVE"!==o?g.format.applyStyle("color",g.helpers.HEXtoRGB(o)):g.format.removeStyle("color"),t()}return{showColorsPopup:function(){var o=g.$tb.find('.fr-command[data-cmd="color"]'),t=g.popups.get("colors.picker");if(t||(t=function(){var o,t='<div class="fr-buttons fr-colors-buttons">';g.opts.toolbarInline&&0<g.opts.colorsButtons.length&&(t+=g.button.buildList(g.opts.colorsButtons)),t+=(o='<div class="fr-colors-tabs fr-group">',o+='<span class="fr-colors-tab '+("background"===g.opts.colorsDefaultTab?"":"fr-selected-tab ")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"!==g.opts.colorsDefaultTab)+'" data-param1="text" data-cmd="colorChangeSet" title="'+g.language.translate("Text")+'">'+g.language.translate("Text")+"</span>",(o+='<span class="fr-colors-tab '+("background"===g.opts.colorsDefaultTab?"fr-selected-tab":"")+'fr-command" tabIndex="-1" role="button" aria-pressed="'+("background"===g.opts.colorsDefaultTab)+'" data-param1="background" data-cmd="colorChangeSet" title="'+g.language.translate("Background")+'">'+g.language.translate("Background")+"</span>")+"</div></div>");var r="";g.opts.colorsHEXInput&&(r='<div class="fr-color-hex-layer fr-active fr-layer" id="fr-color-hex-layer-'+g.id+'"><div class="fr-input-line"><input maxlength="7" id="fr-color-hex-layer-text-'+g.id+'" type="text" placeholder="'+g.language.translate("HEX Color")+'" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="customColor" tabIndex="2" role="button">'+g.language.translate("OK")+"</button></div></div>");var b,e={buttons:t,text_colors:s("text"),background_colors:s("background"),custom_color:r},a=g.popups.create("colors.picker",e);return b=a,g.events.on("popup.tab",function(o){var t=C(o.currentTarget);if(!g.popups.isVisible("colors.picker")||!t.is("span"))return!0;var r=o.which,e=!0;if(m.KEYCODE.TAB===r){var a=b.find(".fr-buttons");e=!g.accessibility.focusToolbar(a,!!o.shiftKey)}else if(m.KEYCODE.ARROW_UP===r||m.KEYCODE.ARROW_DOWN===r||m.KEYCODE.ARROW_LEFT===r||m.KEYCODE.ARROW_RIGHT===r){if(t.is("span.fr-select-color")){var s=t.parent().find("span.fr-select-color"),l=s.index(t),c=g.opts.colorsStep,n=Math.floor(s.length/c),i=l%c,p=Math.floor(l/c),f=p*c+i,d=n*c;m.KEYCODE.ARROW_UP===r?f=((f-c)%d+d)%d:m.KEYCODE.ARROW_DOWN===r?f=(f+c)%d:m.KEYCODE.ARROW_LEFT===r?f=((f-1)%d+d)%d:m.KEYCODE.ARROW_RIGHT===r&&(f=(f+1)%d);var u=C(s.get(f));g.events.disableBlur(),u.focus(),e=!1}}else m.KEYCODE.ENTER===r&&(g.button.exec(t),e=!1);return!1===e&&(o.preventDefault(),o.stopPropagation()),e},!0),a}()),!t.hasClass("fr-active"))if(g.popups.setContainer("colors.picker",g.$tb),c.map(function(o){!function(o){var t,r=g.popups.get("colors.picker"),e=C(g.selection.element());t="background"===o?"background-color":"color";var a=r.find(".fr-"+o+"-color .fr-select-color");for(a.find(".fr-selected-color").remove(),a.removeClass("fr-active-item"),a.not('[data-param1="REMOVE"]').attr("aria-selected",!1);e.get(0)!==g.el;){if("transparent"!==e.css(t)&&"rgba(0, 0, 0, 0)"!==e.css(t)){var s=r.find(".fr-"+o+'-color .fr-select-color[data-param1="'+g.helpers.RGBToHex(e.css(t))+'"]');s.append('<span class="fr-selected-color" aria-hidden="true">\uf00c</span>'),s.addClass("fr-active-item").attr("aria-selected",!0);break}e=e.parent()}l(o)}(o)}),o.isVisible()){var r=o.offset().left+o.outerWidth()/2,e=o.offset().top+(g.opts.toolbarBottom?10:o.outerHeight()-10);g.popups.show("colors.picker",r,e,o.outerHeight())}else g.position.forSelection(t),g.popups.show("colors.picker")},hideColorsPopup:t,changeSet:function(o,t){o.hasClass("fr-selected-tab")||(o.siblings().removeClass("fr-selected-tab").attr("aria-pressed",!1),o.addClass("fr-selected-tab").attr("aria-pressed",!0),o.parents(".fr-popup").find(".fr-color-set").removeClass("fr-selected-set"),o.parents(".fr-popup").find(".fr-color-set.fr-"+t+"-color").addClass("fr-selected-set"),l(t)),g.accessibility.focusPopup(o.parents(".fr-popup"))},background:e,customColor:function(){var o=g.popups.get("colors.picker"),t=o.find(".fr-color-hex-layer input");if(t.length){var r=t.val();"background"===o.find(".fr-selected-tab").attr("data-param1")?e(r):a(r)}},text:a,back:function(){g.popups.hide("colors.picker"),g.toolbar.showInline()}}},m.DefineIcon("colors",{NAME:"tint"}),m.RegisterCommand("color",{title:"Colors",undo:!1,focus:!0,refreshOnCallback:!1,popup:!0,callback:function(){this.popups.isVisible("colors.picker")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("colors.picker")):this.colors.showColorsPopup()},plugin:"colors"}),m.RegisterCommand("textColor",{undo:!0,callback:function(o,t){this.colors.text(t)}}),m.RegisterCommand("backgroundColor",{undo:!0,callback:function(o,t){this.colors.background(t)}}),m.RegisterCommand("colorChangeSet",{undo:!1,focus:!1,callback:function(o,t){var r=this.popups.get("colors.picker").find('.fr-command[data-cmd="'+o+'"][data-param1="'+t+'"]');this.colors.changeSet(r,t)}}),m.DefineIcon("colorsBack",{NAME:"arrow-left"}),m.RegisterCommand("colorsBack",{title:"Back",undo:!1,focus:!1,back:!0,refreshAfterCallback:!1,callback:function(){this.colors.back()}}),m.RegisterCommand("customColor",{title:"OK",undo:!0,callback:function(){this.colors.customColor()}}),m.DefineIcon("remove",{NAME:"eraser"})});